# –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

- ‚úÖ GZip —Å–∂–∞—Ç–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –±—ç–∫–µ–Ω–¥–∞ (FastAPI middleware)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ p50/p95 –∫–∞–∂–¥—ã–µ 50 –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ö—ç—à-—Ö–µ–¥–µ—Ä—ã –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ `/uploads` (1 –¥–µ–Ω—å)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (minify, treeshake, vendor split)
- ‚úÖ Lazy loading –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (ProfilesPage, NetListPage, ProfileEditPage)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –º—ç—Ç—á–µ–π)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–ª–∞ –ë–î (10/20 overflow)
- ‚úÖ –ö—ç—à-—Ö–µ–¥–µ—Ä—ã –¥–ª—è `/assets/*` –≤ Netlify/Vercel

---

## üìã –ü–æ—à–∞–≥–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
npm run build

# –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑–º–µ—Ä dist/
# - –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 2MB
# - assets/*.js –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Ö—ç—à–∏ –≤ –∏–º–µ–Ω–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, index-abc123.js)
# - –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ chunk > 1.5MB - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ lazy loading
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- `dist/index.html` - ~1-2KB
- `dist/assets/index-*.js` - ~200-500KB (vendor chunk)
- `dist/assets/*.js` - –æ—Å—Ç–∞–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏ < 500KB –∫–∞–∂–¥—ã–π

---

### –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î

**–î–ª—è Neon/PostgreSQL:**

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ –ë–î —á–µ—Ä–µ–∑ psql –∏–ª–∏ Neon Console
psql "postgresql://user:pass@host/dbname"

# –ò–ª–∏ —á–µ—Ä–µ–∑ Neon Console ‚Üí SQL Editor

# –ü—Ä–∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏—é:
\i migrations/001_add_performance_indexes.sql

# –ò–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏ –≤ SQL Editor
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤:**

```sql
-- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
SELECT 
    schemaname,
    tablename,
    indexname,
    indexdef
FROM pg_indexes
WHERE tablename IN ('profiles', 'swipes', 'matches')
    AND (indexname LIKE '%_desc' OR indexname LIKE '%_like_created' OR indexname LIKE '%_gin')
ORDER BY tablename, indexname;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 15-20 –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü.

---

### –®–∞–≥ 3: –î–µ–ø–ª–æ–π –±—ç–∫–µ–Ω–¥–∞ (Koyeb)

1. **–ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Koyeb:**
   - `DATABASE_URL` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –∫ Neon –ë–î
   - `JWT_SECRET` –∏–ª–∏ `JWT_SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (32+ —Å–∏–º–≤–æ–ª–æ–≤)
   - `CORS_ORIGINS` - URL —Ç–≤–æ–µ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (Netlify/Vercel)

2. **–î–µ–ø–ª–æ–π:**
   ```bash
   # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Git –¥–µ–ø–ª–æ–π - –ø—Ä–æ—Å—Ç–æ push
   git push origin main
   
   # –ò–ª–∏ —á–µ—Ä–µ–∑ Koyeb CLI
   koyeb service update <service-name>
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:**
   - –í Koyeb Dashboard ‚Üí Logs
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏: `‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ`
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏: `‚úÖ JWT_SECRET_KEY —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω`
   - –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: `‚ö†Ô∏è WARNING` –∏–ª–∏ `‚ùå –û—à–∏–±–∫–∞`

4. **Smoke test –±—ç–∫–µ–Ω–¥–∞:**
   ```bash
   # –ó–∞–º–µ–Ω–∏ URL –Ω–∞ —Å–≤–æ–π Koyeb URL
   curl -w "\nTime: %{time_total}s\n" https://your-backend.koyeb.app/health
   
   # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"ok","service":"StudNet API"}
   # Time –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 0.5s
   ```

---

### –®–∞–≥ 4: –î–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (Netlify/Vercel)

**–î–ª—è Netlify:**

1. **–ü—Ä–æ–≤–µ—Ä—å `netlify.toml`:**
   - `build.command = "npm run build"`
   - `publish = "dist"`
   - –ï—Å—Ç—å —Å–µ–∫—Ü–∏—è `[[headers]]` –¥–ª—è `/assets/*`

2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Netlify:**
   - `VITE_API_BASE_URL` - URL —Ç–≤–æ–µ–≥–æ Koyeb –±—ç–∫–µ–Ω–¥–∞

3. **–î–µ–ø–ª–æ–π:**
   ```bash
   # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Git - –ø—Ä–æ—Å—Ç–æ push
   git push origin main
   
   # –ò–ª–∏ —á–µ—Ä–µ–∑ Netlify CLI
   netlify deploy --prod
   ```

**–î–ª—è Vercel:**

1. **–ü—Ä–æ–≤–µ—Ä—å `vercel.json`:**
   - –ï—Å—Ç—å `headers` –¥–ª—è `/assets/*` —Å `Cache-Control`

2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - `VITE_API_BASE_URL` - URL —Ç–≤–æ–µ–≥–æ Koyeb –±—ç–∫–µ–Ω–¥–∞

3. **–î–µ–ø–ª–æ–π:**
   ```bash
   vercel --prod
   ```

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

#### 5.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```bash
# –û—Ç–∫—Ä–æ–π DevTools ‚Üí Network
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É

# –ü—Ä–æ–≤–µ—Ä—å:
# 1. –í—Å–µ .js —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∂–∞—Ç—ã (Content-Encoding: gzip –∏–ª–∏ br)
# 2. assets/*.js –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å Cache-Control: max-age=31536000
# 3. –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å < 3s –Ω–∞ 3G
# 4. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–ø–æ—Å–ª–µ –∫—ç—à–∞) < 1s
```

**Chrome DevTools ‚Üí Lighthouse:**
- Performance score –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 80
- First Contentful Paint < 2s
- Time to Interactive < 4s

#### 5.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ç–∫–µ–Ω–¥–∞

```bash
# –ó–∞–º–µ–Ω–∏ URL –Ω–∞ —Å–≤–æ–∏
API_URL="https://your-backend.koyeb.app"
FRONTEND_URL="https://your-frontend.netlify.app"

# –¢–µ—Å—Ç –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ health endpoint
for i in {1..10}; do
  curl -w "\nTime: %{time_total}s\n" -s "$API_URL/health" > /dev/null
done

# –¢–µ—Å—Ç –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ API endpoint (–Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω)
# –ü–æ–ª—É—á–∏ —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, –∑–∞—Ç–µ–º:
curl -w "\nTime: %{time_total}s\n" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  "$API_URL/api/profiles?page=0&size=10"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –±—ç–∫–µ–Ω–¥–∞ (Koyeb):**

–ß–µ—Ä–µ–∑ 50+ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏ –≤–∏–¥–∞:
```
latency path=/api/profiles p50=120.5ms p95=450.2ms samples=50
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- p50 < 200ms –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- p95 < 1000ms –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–∏–ª–µ–π)
- –ï—Å–ª–∏ p95 > 2000ms - –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ë–î

#### 5.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î

```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ –ë–î
psql "postgresql://..."

-- –ü—Ä–æ–≤–µ—Ä—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω pg_stat_statements)
SELECT 
    query,
    calls,
    mean_exec_time,
    max_exec_time
FROM pg_stat_statements
ORDER BY mean_exec_time DESC
LIMIT 10;

-- –ü—Ä–æ–≤–µ—Ä—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
SELECT 
    schemaname,
    tablename,
    indexname,
    idx_scan as index_scans,
    idx_tup_read as tuples_read,
    idx_tup_fetch as tuples_fetched
FROM pg_stat_user_indexes
WHERE schemaname = 'public'
ORDER BY idx_scan DESC;
```

---

### –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CDN (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**Netlify:**
- CDN –≤–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å –≤ Netlify Dashboard ‚Üí Site settings ‚Üí Build & deploy ‚Üí Post processing
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω "Asset optimization"

**Vercel:**
- CDN –≤–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å –≤ Vercel Dashboard ‚Üí Settings ‚Üí General
- Edge Network –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–µ–Ω

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏):**
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Cloudflare –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CloudFront (AWS) –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ CDN

---

### –®–∞–≥ 7: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ë—ã—Å—Ç—Ä—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ –ª–æ–≥–∏:**

```bash
# Koyeb CLI (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
koyeb logs tail <service-name>

# –ò–ª–∏ —á–µ—Ä–µ–∑ Koyeb Dashboard ‚Üí Logs
# –°–ª–µ–¥–∏ –∑–∞:
# - latency path=... p95=...
# - –û—à–∏–±–∫–∏ 500/502/503
# - WARNING –æ –ø—É–ª–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**
- p95 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å API < 1000ms
- –û—à–∏–±–∫–∏ < 1% –æ—Ç –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—É–ª–∞ –ë–î < 80% (–µ—Å–ª–∏ –≤–∏–¥–∏—à—å "pool exhausted" - —É–≤–µ–ª–∏—á—å pool_size)

---

## üö® –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å—ë –µ—â—ë –º–µ–¥–ª–µ–Ω–Ω—ã–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

1. **–ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–æ–≤:**
   ```bash
   npm run build
   du -sh dist/assets/*
   ```
   –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ —Ñ–∞–π–ª > 1MB - –¥–æ–±–∞–≤—å –±–æ–ª—å—à–µ lazy loading.

2. **–ü—Ä–æ–≤–µ—Ä—å CDN:**
   - –û—Ç–∫—Ä–æ–π DevTools ‚Üí Network
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å—Ç–∞—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å CDN (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥—Ä—É–≥–æ–π –¥–æ–º–µ–Ω –∏–ª–∏ –ø–æ–¥–¥–æ–º–µ–Ω)

3. **–ü—Ä–æ–≤–µ—Ä—å —Å–∂–∞—Ç–∏–µ:**
   - –í Network tab –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `Content-Encoding: gzip` –∏–ª–∏ `br`
   - –ï—Å–ª–∏ –Ω–µ—Ç - –≤–∫–ª—é—á–∏ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ API –∑–∞–ø—Ä–æ—Å—ã

1. **–ü—Ä–æ–≤–µ—Ä—å –∏–Ω–¥–µ–∫—Å—ã –ë–î:**
   ```sql
   -- –í—ã–ø–æ–ª–Ω–∏ EXPLAIN ANALYZE –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
   EXPLAIN ANALYZE
   SELECT * FROM profiles 
   WHERE is_active = TRUE AND deleted_at IS NULL
   ORDER BY created_at DESC
   LIMIT 50;
   ```
   –î–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏–Ω–¥–µ–∫—Å `idx_profiles_created_at_desc`, –Ω–µ "Seq Scan".

2. **–ü—Ä–æ–≤–µ—Ä—å –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:**
   - –í –ª–æ–≥–∞—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "pool exhausted" –∏–ª–∏ "timeout"
   - –ï—Å–ª–∏ –µ—Å—Ç—å - —É–≤–µ–ª–∏—á—å `pool_size` –≤ `backend/app/database.py`

3. **–ü—Ä–æ–≤–µ—Ä—å —Ä–µ–≥–∏–æ–Ω –¥–µ–ø–ª–æ—è:**
   - –§—Ä–æ–Ω—Ç–µ–Ω–¥, –±—ç–∫–µ–Ω–¥ –∏ –ë–î –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ–¥–Ω–æ–º —Ä–µ–≥–∏–æ–Ω–µ
   - Koyeb: –ø—Ä–æ–≤–µ—Ä—å —Ä–µ–≥–∏–æ–Ω –≤ Settings
   - Neon: –ø—Ä–æ–≤–µ—Ä—å —Ä–µ–≥–∏–æ–Ω –ë–î

### –ü—Ä–æ–±–ª–µ–º–∞: –í—ã—Å–æ–∫–∏–π p95 (> 2000ms)

1. **–ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π endpoint:**
   - –í –ª–æ–≥–∞—Ö –Ω–∞–π–¥–∏ `latency path=/api/... p95=...`
   - –ï—Å–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–π - –ø—Ä–æ–≤–µ—Ä—å –µ–≥–æ SQL –∑–∞–ø—Ä–æ—Å—ã

2. **–î–æ–±–∞–≤—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã:**
   ```sql
   -- –ü—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—à—å –ø–æ city + gender
   CREATE INDEX IF NOT EXISTS idx_profiles_city_gender 
   ON profiles(city, gender) 
   WHERE is_active = TRUE AND deleted_at IS NULL;
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å N+1 –∑–∞–ø—Ä–æ—Å—ã:**
   - –í–∫–ª—é—á–∏ `echo=True` –≤ `backend/app/database.py` –≤—Ä–µ–º–µ–Ω–Ω–æ
   - –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ SQL - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ü–∏–∫–ª–µ

---

## üìä –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

```bash
# 1. Health check
curl https://your-backend.koyeb.app/health

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
open https://your-frontend.netlify.app

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (10 –∑–∞–ø—Ä–æ—Å–æ–≤)
for i in {1..10}; do
  time curl -s https://your-backend.koyeb.app/health > /dev/null
done

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
curl -I https://your-frontend.netlify.app | grep -i "content-length"
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–æ–±—Ä–∞–Ω, —Ä–∞–∑–º–µ—Ä < 2MB
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ë—ç–∫–µ–Ω–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω, health check –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] CDN –≤–∫–ª—é—á–µ–Ω, —Å—Ç–∞—Ç–∏–∫–∞ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è
- [ ] GZip/Brotli —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ DevTools)
- [ ] p95 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å < 1000ms (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –ª–æ–≥–∞—Ö)
- [ ] Lighthouse Performance > 80
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö –±—ç–∫–µ–Ω–¥–∞

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ –∫–æ–¥–µ
- –ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
- –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Sentry –¥–ª—è –æ—à–∏–±–æ–∫)

